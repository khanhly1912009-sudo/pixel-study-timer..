<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Study Timer & Rewards üíé</title>
    
    <style>
        /* Nh·∫≠p font ch·ªØ phong c√°ch pixel */
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        :root {
            --pixel-font: 'Press Start 2P', cursive;
            --bg-color: #87ceeb; /* Xanh da tr·ªùi nh·∫°t */
            --ground-color: #795548; /* N√¢u ƒë·∫•t */
            --text-color: #333;
        }

        body {
            font-family: var(--pixel-font);
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
            background-image: linear-gradient(to top, var(--ground-color) 150px, var(--bg-color) 150px);
        }

        #main-container {
            display: flex;
            flex-wrap: wrap;
            width: 100%;
            max-width: 1200px;
            gap: 20px;
        }

        #youtube-player {
            flex: 2; /* Chi·∫øm 2 ph·∫ßn */
            min-width: 300px;
            border: 4px solid #000;
            box-shadow: 8px 8px 0px #000;
            padding: 10px;
            background-color: #fff;
        }

        #youtube-frame {
            display: block;
            width: 100%;
            aspect-ratio: 16 / 9; /* T·ª∑ l·ªá 16:9 cho video */
        }

        #study-area {
            flex: 1; /* Chi·∫øm 1 ph·∫ßn */
            min-width: 280px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Khung chung cho ƒë·ªìng h·ªì v√† ph·∫ßn th∆∞·ªüng */
        #timer-box, #reward-box {
            border: 4px solid #000;
            box-shadow: 8px 8px 0px #000;
            background-color: #f0f0f0;
            padding: 20px;
            text-align: center;
        }

        /* ƒê·ªìng h·ªì ƒë·∫øm */
        #timer {
            font-size: 1.8em;
            margin: 15px 0;
            color: #e74c3c; /* M√†u ƒë·ªè n·ªïi b·∫≠t */
        }

        /* N√∫t b·∫•m phong c√°ch pixel */
        button {
            font-family: var(--pixel-font);
            background-color: #2ecc71; /* Xanh l√° c√¢y */
            color: #fff;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            border-radius: 0;
            border: 3px solid #000;
            box-shadow: 4px 4px 0px #000;
            transition: all 0.1s;
        }

        button:hover:not(:disabled) {
            box-shadow: 2px 2px 0px #000;
            transform: translate(2px, 2px);
            background-color: #27ae60;
        }

        button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
            box-shadow: 4px 4px 0px #555;
        }

        /* C·∫£nh v·∫≠t Pixel (N√∫i v√† M√¢y) */
        #pixel-scene {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            z-index: -1;
        }

        /* N√∫i */
        #pixel-scene::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 10%;
            width: 0;
            height: 0;
            border-left: 100px solid transparent;
            border-right: 100px solid transparent;
            border-bottom: 120px solid #7f8c8d; /* N√∫i X√°m */
            box-shadow: 
                -8px -8px 0 0 #95a5a6, 
                8px -8px 0 0 #6c7a7b; 
        }

        /* M√¢y */
        .cloud {
            position: absolute;
            background: #fff;
            border: 2px solid #000;
            box-shadow: 4px 4px 0 #000;
            border-radius: 50%;
            z-index: -2;
        }
        .cloud:nth-child(1) { width: 60px; height: 30px; top: 50px; left: 60%; }
        .cloud:nth-child(2) { width: 80px; height: 40px; top: 80px; left: 75%; }
        .cloud:nth-child(3) { width: 40px; height: 20px; top: 40px; left: 20%; }
        /* D√πng box-shadow ƒë·ªÉ t·∫°o h√¨nh d·∫°ng ƒë√°m m√¢y pixel */
        .cloud::before, .cloud::after {
            content: '';
            position: absolute;
            background: inherit;
            border: inherit;
            border-radius: inherit;
            box-shadow: inherit;
        }
        .cloud::before {
            width: 100%; height: 100%; 
            top: -10px; left: 15px; 
            transform: scale(0.7);
        }
        .cloud::after {
            width: 100%; height: 100%; 
            top: 5px; left: -10px; 
            transform: scale(0.9);
        }

        @media (max-width: 768px) {
            #main-container {
                flex-direction: column;
            }
        }

    </style>
</head>
<body>

    <div id="main-container">
        <div id="youtube-player">
            <h2>üé∂ Nh·∫°c N·ªÅn H·ªçc T·∫≠p</h2>
            <div id="youtube-frame"></div>
            <p>Ch·ªçn video nh·∫°c b·∫°n y√™u th√≠ch r·ªìi nh·∫•n Start! (M·∫∑c ƒë·ªãnh: Lofi)</p>
        </div>

        <div id="study-area">
            <div id="timer-box">
                <h2>Th·ªùi Gian H·ªçc</h2>
                <div id="timer">00:00:00</div>
                <button id="start-button">B·∫Øt ƒê·∫ßu H·ªçc üöÄ</button>
                <button id="stop-button" disabled>D·ª´ng L·∫°i üõë</button>
            </div>

            <div id="reward-box">
                <h2>Ph·∫ßn Th∆∞·ªüng üíé</h2>
                <p>Kim C∆∞∆°ng: <span id="diamond-count">0</span></p>
                <p class="pixel-info" style="font-size: 0.7em;">(C·ª© 10 gi√¢y h·ªçc nh·∫≠n 1 Kim C∆∞∆°ng!)</p>
            </div>
        </div>
    </div>

    <div id="pixel-scene">
        <div class="cloud"></div>
        <div class="cloud"></div>
        <div class="cloud"></div>
    </div>

    <script>
        // C√°c bi·∫øn tr·∫°ng th√°i
        let isRunning = false;
        let intervalId;
        let seconds = 0;
        let diamondCount = 0;

        // C√°c ph·∫ßn t·ª≠ DOM
        const timerDisplay = document.getElementById('timer');
        const startButton = document.getElementById('start-button');
        const stopButton = document.getElementById('stop-button');
        const diamondCountDisplay = document.getElementById('diamond-count');

        // Bi·∫øn YouTube Player
        let player;

        // H√†m t·∫£i YouTube IFrame Player API
        function loadYouTubeAPI() {
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }

        // H√†m s·∫Ω ƒë∆∞·ª£c g·ªçi khi YouTube API s·∫µn s√†ng
        window.onYouTubeIframeAPIReady = function() {
            // M·∫∑c ƒë·ªãnh video ID l√† Lofi Study Music:
            const defaultVideoId = '5qap5aO4i9A'; // Thay b·∫±ng ID video b·∫°n mu·ªën
            
            player = new YT.Player('youtube-frame', {
                height: '100%',
                width: '100%',
                videoId: defaultVideoId,
                playerVars: {
                    'controls': 1,
                    'autoplay': 0, // Kh√¥ng t·ª± ƒë·ªông ch·∫°y
                    'modestbranding': 1 
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            console.log("YouTube Player ƒë√£ s·∫µn s√†ng.");
        }

        // H√†m c·∫≠p nh·∫≠t ƒë·ªìng h·ªì v√† th∆∞·ªüng kim c∆∞∆°ng
        function updateTimer() {
            seconds++;
            
            // T√≠nh to√°n gi·ªù, ph√∫t, gi√¢y
            const h = String(Math.floor(seconds / 3600)).padStart(2, '0');
            const m = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
            const s = String(seconds % 60).padStart(2, '0');
            
            timerDisplay.textContent = `${h}:${m}:${s}`;

            // Logic nh·∫≠n kim c∆∞∆°ng: C·ª© 10 gi√¢y ƒë∆∞·ª£c 1 kim c∆∞∆°ng
            if (seconds > 0 && seconds % 10 === 0) {
                diamondCount++;
                diamondCountDisplay.textContent = diamondCount;
                // Th√™m hi·ªáu ·ª©ng nh·∫•p nh√°y cho kim c∆∞∆°ng
                rewardBox.classList.add('flash');
                setTimeout(() => rewardBox.classList.remove('flash'), 300);
            }
        }

        // H√†m B·∫Øt ƒê·∫ßu
        function startTimer() {
            if (isRunning) return;

            isRunning = true;
            intervalId = setInterval(updateTimer, 1000); 

            startButton.disabled = true;
            stopButton.disabled = false;
            timerDisplay.style.color = '#2ecc71'; 

            // ƒêi·ªÅu khi·ªÉn YouTube: B·∫≠t nh·∫°c
            if (player && typeof player.playVideo === 'function') {
                player.playVideo();
            }
        }

        // H√†m D·ª´ng L·∫°i
        function stopTimer() {
            if (!isRunning) return;

            isRunning = false;
            clearInterval(intervalId); 
            
            startButton.disabled = false;
            stopButton.disabled = true;
            timerDisplay.style.color = '#e74c3c'; 

            // ƒêi·ªÅu khi·ªÉn YouTube: T·∫°m d·ª´ng nh·∫°c
            if (player && typeof player.pauseVideo === 'function') {
                player.pauseVideo();
            }
        }

        // G√°n s·ª± ki·ªán cho n√∫t
        startButton.addEventListener('click', startTimer);
        stopButton.addEventListener('click', stopTimer);

        // Kh·ªüi ƒë·ªông vi·ªác t·∫£i YouTube API khi trang t·∫£i xong
        document.addEventListener('DOMContentLoaded', loadYouTubeAPI);

    </script>
</body>
</html>